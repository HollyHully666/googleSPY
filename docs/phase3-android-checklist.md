# Фаза 3: Android-клиент — чеклист

## Реализовано

- **Экран**: только логин (домен, логин, пароль). После «Подключиться» сервис запускается и приложение закрывается (уходит в фон).
- **Подключение**: wss через Socket.io с query-параметрами `login` и `password`.
- **Foreground Service**: `DeviceControlService` (LifecycleService), минимальное уведомление (тихое, низкий приоритет), постоянный сокет.
- **Reconnect**: при отключении/ошибке — повтор через 5 с (`Handler.postDelayed`).
- **Разрешения**: запрос только локации, камеры, микрофона (без уведомлений). Сервис стартует в любом случае; при ошибке `startForeground` сервис останавливается.
- **Захват по запросу**:
  - **GPS**: FusedLocationProviderClient → `gps_data` (lat, lon).
  - **Камера**: CameraX, один кадр → JPEG base64 в `camera_data`.
  - **Микрофон / экран**: заглушки (`error: not_implemented`), можно доработать позже.
- **Остановка**: только через Настройки → Приложения → [приложение] → Остановить. В приложении кнопки «Отключить» нет.

## Сборка и проверка

1. Открыть проект в Android Studio (`android/`).
2. Запустить приложение на устройстве или эмуляторе (для камеры/GPS лучше устройство).
3. На экране логина указать URL сервера **https://big-brother.pro** (сервер на VPS с этим доменом), логин и пароль из `.env` сервера.
4. Нажать «Подключиться» → выдать разрешения → должен появиться главный экран и уведомление «Подключение к серверу».
5. С веб-панели (Фаза 4) или тестовым скриптом отправить `request_gps` / `request_camera` в комнату логина — устройство должно ответить `gps_data` / `camera_data`.

## Сборка APK

- Debug: в Android Studio **Build → Build Bundle(s) / APK(s) → Build APK(s)** или:
  ```bash
  cd android && ./gradlew assembleDebug
  ```
- APK: `android/app/build/outputs/apk/debug/app-debug.apk`.

## Дальнейшая доработка (по желанию)

- Микрофон: MediaRecorder → аудио-chunks → `mic_data`.
- Экран: MediaProjection → кадры → `screen_data`.
- Отображение статуса соединения на главном экране (подключён/отключён).
